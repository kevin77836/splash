import{S as Ne,P as Ze,W as Ke,O as Qe,a as Je,M as je,E as et,f as tt,b as Ee,j as nt,e as it,g as le,h as ce,k as st,i as ot}from"./GFrmpgK8.js";import{r as N,T as fe,o as _e,I as be,t as w,v as k,x as c,z as at,N as L,K as l,Q as I,R as rt,O as lt,S as ct}from"./DzvUFI15.js";import{g as Te}from"./D3jsOSc0.js";import{u as ut,S as Ae}from"./DH2J5dUi.js";const dt={class:"c-splash-component"},mt={__name:"SplashGLSL",emits:["stateChange","animationComplete","resourcesLoaded"],setup(xe,{expose:z,emit:ue}){const Q=ue,E=N(null),o=fe({startStrength:.1,endStrength:.01,minLength:2.5,maxLength:3.5,shrinkPower:.25,numLines:4}),p=fe({startStrength:.01,endStrength:.1,minLength:2,maxLength:3,shrinkPower:1.25,numLines:3}),g=fe({count:20,minRadius:.35,maxRadius:.5,minLength:3,maxLength:10,segmentDetail:16,minScale:0}),u=fe({mobileResolution:100,resolution:100,numSegments:50,subtract:20,growSpeed:.1,growthEaseOutPower:.15,shrinkSpeed:1,shrinkEaseInPower:2.5,flowWaveFrequency:1,flowWaveAmplitudeFactor:.3,flowWaveAmplitudeFactorAtStart:1.5,flowWavePhaseFactor:Math.PI*4});let d=null,T=null,m=null,v=null,S=null,P=null,B=null,H=null,se=null,J=0,Z=0,O=0,y=0,s=0,D=0,b=0,j=0,ee=0,M=[],A=[],x=[],$=[],F=[],R=[],W=null,G=null,K=null,te=null,h="idle";function pe(){return new nt({color:16777215,metalness:0,roughness:0,transparent:!0,opacity:.75,transmission:1,ior:1.5,thickness:1,envMapIntensity:10,side:it})}function Ce(){return new Promise((t,i)=>{new et().setPath("/hdr/").load("HDR_Light_Studio_Free_HDRI_Design_04.exr",n=>{n.mapping=tt;const e=H.fromEquirectangular(n).texture;H.dispose(),n.dispose(),console.log("環境貼圖已載入"),d.environment=e,B&&(B.envMap=e,B.needsUpdate=!0),W&&(W.envMap=e,W.needsUpdate=!0),t(e)},void 0,n=>{console.error("無法載入環境貼圖:",n),i(n)})})}function De(){var e,a;if(!P||!S)return;const t=P.getElapsedTime(),i=o.numLines+p.numLines;M.length=i,A.length=i,x.length=i,$.length=i,F.length=i;let n=0;for(let r=0;r<o.numLines;r++)A[n]||(A[n]=new le),(e=A[n])==null||e.set(Math.random()*2-1,Math.random()*2-1,Math.random()*2-1).normalize(),x[n]=ce.randFloat(o.minLength,o.maxLength),$[n]="tt",M[n]=t,h?F[n]=h:F[n]="growing",n++;for(let r=0;r<p.numLines;r++)A[n]||(A[n]=new le),(a=A[n])==null||a.set(Math.random()*2-1,Math.random()*2-1,Math.random()*2-1).normalize(),x[n]=ce.randFloat(p.minLength,p.maxLength),$[n]="th",M[n]=t,h?F[n]=h:F[n]="growing",n++;S.reset()}function Fe(t){if(!P)return;t.reset();const i=P.getElapsedTime(),n=new le(.5,.5,.5),e=o.numLines+p.numLines;Re(i);for(let a=0;a<e;a++){if(M[a]===void 0||i<M[a]||x[a]===void 0)continue;const r=x[a]/t.scale.x;let f=0,_=i-M[a];if(h==="pauseAtStart")f=.05;else if(h==="pauseAtEnd")f=r;else if(h==="growing")if(r>.001){const Y=u.growSpeed,q=r/Y,re=q>0?Math.min(_/q,1):1;f=Math.pow(re,u.growthEaseOutPower)*r}else f=0;else if(h==="shrinking")if(G!==null&&K!==null){const Y=K-G,q=i-G,re=Math.min(q/Y,1),V=Math.pow(re,u.shrinkEaseInPower),ne=Math.max(0,1-V),ie=u.growSpeed,he=r/ie,Me=he>0?Math.min(_/he,1):1;f=Math.pow(Me,u.growthEaseOutPower)*r*ne}else f=r;else if(r>.001){const Y=Math.min(_/(r/u.growSpeed),1);f=Math.pow(Y,u.growthEaseOutPower)*r}else f=0;if(f<=.001)continue;const X=A[a],C=$[a];if(!X||!C)continue;let U,me,ae;C==="tt"?(U=o.startStrength,me=o.endStrength,ae=o.shrinkPower):(U=p.startStrength,me=p.endStrength,ae=p.shrinkPower);for(let Y=0;Y<=u.numSegments;Y++){const q=Y/u.numSegments,re=Math.pow(q,ae),V=ce.lerp(U,me,re);let ne=V,ie;if(h==="pauseAtStart")ie=u.flowWaveAmplitudeFactorAtStart*V;else if(h==="shrinking"&&f<.1){const Pe=Math.max(0,Math.min(1,10*(.1-f))),ye=u.flowWaveAmplitudeFactor*V,Ve=u.flowWaveAmplitudeFactorAtStart*V;ie=ye+Pe*(Ve-ye)}else ie=u.flowWaveAmplitudeFactor*V;const he=Math.sin(i*u.flowWaveFrequency-q*u.flowWavePhaseFactor)*ie;ne+=he,ne=Math.max(ne,0);const ge=X.clone().multiplyScalar(f*q).add(n);t.addBall(ge.x,ge.y,ge.z,ne,u.subtract)}}t.update()}function Re(t){if(P)if(h==="growing"&&te!==null){const i=o.numLines+p.numLines;let n=0,e=0;for(let r=0;r<i;r++){if(M[r]===void 0||x[r]===void 0)continue;e++;const f=x[r]/((S==null?void 0:S.scale.x)||1),_=t-(M[r]||t),X=u.growSpeed,C=f/X,U=C>0?Math.min(_/C,1):1;n+=U}(e>0?n/e:0)>=.99&&oe("pauseAtEnd")}else h==="shrinking"&&G!==null&&K!==null&&t>=K&&oe("pauseAtStart")}function We(t,i){const n=new st(i,g.segmentDetail,g.segmentDetail);W||(W=pe());const e=new Ee(n,W);e.position.set(0,0,0);const a={mesh:e,direction:t,targetLength:0,initialScale:i,active:!0,progress:0,currentPosition:0,lastUpdateTime:P?P.getElapsedTime():0,transitionStartTime:null,transitionStartPos:0};return d.add(e),R.push(a),a}function ve(){Se();for(let t=0;t<g.count;t++){const i=new le(Math.random()*2-1,Math.random()*2-1,Math.random()*2-1).normalize(),n=g.minRadius+Math.random()*(g.maxRadius-g.minRadius),e=We(i,n);e.targetLength=ce.randFloat(g.minLength,g.maxLength)}}function Se(){for(let t=0;t<R.length;t++){const i=R[t];i.mesh&&(d.remove(i.mesh),i.mesh.geometry.dispose())}R=[]}function ze(){if(!P)return;const t=P.getElapsedTime();let i=1;if(h==="growing"&&te!==null){const n=o.numLines+p.numLines;let e=0,a=0;for(let r=0;r<n;r++){if(M[r]===void 0||x[r]===void 0)continue;a++;const f=x[r]/((S==null?void 0:S.scale.x)||1),_=t-(M[r]||t),X=u.growSpeed,C=f/X,U=C>0?Math.min(_/C,1):1;e+=U}i=a>0?e/a:1}for(let n=0;n<R.length;n++){const e=R[n];if(!e.active||!e.mesh)continue;let a=0;if(h==="pauseAtStart")a=0;else if(h==="pauseAtEnd")a=e.targetLength;else if(h==="growing"){if(te!==null){e.transitionStartTime!==te&&(e.transitionStartTime=te,e.transitionStartPos=e.currentPosition);const _=Math.pow(i,u.growthEaseOutPower),C=(e.targetLength-e.transitionStartPos)*_;a=e.transitionStartPos+C,i>=.99&&(a=e.targetLength)}}else if(h==="shrinking"&&G!==null&&K!==null){e.transitionStartTime!==G&&(e.transitionStartTime=G,e.transitionStartPos=e.currentPosition);const _=K-G,X=t-G,C=Math.min(X/_,1),U=Math.pow(C,u.shrinkEaseInPower),ae=e.transitionStartPos*U;a=e.transitionStartPos-ae,U>=.99&&(a=0)}a=Math.max(0,Math.min(a,e.targetLength)),e.currentPosition=a,e.progress=e.targetLength>0?a/e.targetLength:0;const r=e.direction.clone().multiplyScalar(a);e.mesh.position.copy(r);let f;if(a<.01)f=g.minScale;else{const _=Math.min(e.progress*1.5,1);f=g.minScale+(e.initialScale-g.minScale)*_}e.mesh.scale.set(f,f,f)}}function we(){if(se=requestAnimationFrame(we),!(!S||!B||!T||!m||!d||!v)){if(Fe(S),ze(),s+=(J-s)*.05,D+=(Z-D)*.05,d.rotation.x=s,d.rotation.y=D,de()){S.rotation.y+=.0025;for(let t=0;t<R.length;t++)R[t].mesh.rotation.y+=.0025}d.position.x=O+b,d.position.y=y+j,d.position.z=ee,v.update(),m.render(d,T)}}function ke(){var n,e;if(!T||!m)return;const t=((n=E.value)==null?void 0:n.clientWidth)??window.innerWidth,i=((e=E.value)==null?void 0:e.clientHeight)??window.innerHeight;T.aspect=t/i,T.updateProjectionMatrix(),m.setSize(t,i)}function Be(){if(!E.value)return console.error("Canvas container not found!"),!1;const t=E.value,i=t.clientWidth,n=t.clientHeight;d=new Ne,d.background=null,T=new Ze(45,i/n,.1,1e3),T.position.set(0,0,30),T.lookAt(d.position),m=new Ke({antialias:!0,alpha:!0}),m.setSize(i,n),m.setPixelRatio(Math.min(window.devicePixelRatio,1.5)),t.appendChild(m.domElement),v=new Qe(T,m.domElement),v.enableDamping=!0,v.enableZoom=!1,v.enablePan=!1,v.enableRotate=!1,v.minDistance=T.position.length(),v.maxDistance=T.position.length(),H=new Je(m),H.compileEquirectangularShader(),B=pe();let e;de()?e=u.mobileResolution:e=u.resolution;const a=e*1.5;return S=new je(e,B,!0,!0,1e5),S.isolation=a,S.scale.set(8,8,8),S.enableUvs=!1,S.enableColors=!1,d.add(S),P=new ot,W=pe(),b=0,j=0,ee=0,!0}function Ge(){cancelAnimationFrame(se),window.removeEventListener("resize",ke),b=0,j=0,ee=0,Se(),v&&v.dispose(),m&&m.dispose(),B&&(B.dispose(),d!=null&&d.environment&&d.environment.dispose()),S&&(d==null||d.remove(S)),d&&d.traverse(t=>{var i;if(t instanceof Ee){(i=t.geometry)==null||i.dispose();const n=t.material;Array.isArray(n)?n.forEach(e=>e.dispose()):n&&n.dispose()}}),H&&H.dispose(),E.value&&m&&E.value.removeChild(m.domElement),W&&W.dispose(),console.log("Three.js場景已清理")}function de(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function Ue(){h!=="growing"&&h!=="pauseAtEnd"&&(h="growing",$e())}function Ie(){h!=="shrinking"&&h!=="pauseAtStart"&&(h="shrinking",Xe())}function Oe(){oe("pauseAtStart"),De(),ve();const t=o.numLines+p.numLines;for(let i=0;i<t;i++)F[i]!==void 0&&(F[i]="pauseAtStart");console.log("初始化完成：線條收合狀態")}function oe(t){h=t,Q("stateChange",t),t==="pauseAtEnd"?(console.log("所有線條已生長完成，暫停動畫"),Q("animationComplete","growing")):t==="pauseAtStart"&&(console.log("所有線條已收合完成，進入起始暫停狀態"),Q("animationComplete","shrinking"))}function $e(){var n;if(!P)return;const t=P.getElapsedTime(),i=o.numLines+p.numLines;console.log("所有線條同步生長"),R.length===0&&ve(),oe("growing"),te=t;for(let e=0;e<i;e++){if(M[e]===void 0)continue;A[e]||(A[e]=new le),(n=A[e])==null||n.set(Math.random()*2-1,Math.random()*2-1,Math.random()*2-1).normalize(),$[e]=e<o.numLines?"tt":"th";const a=$[e]==="tt"?o.minLength:p.minLength,r=$[e]==="tt"?o.maxLength:p.maxLength;x[e]=ce.randFloat(a,r),M[e]=t,F[e]="growing"}}function Xe(){if(!P)return;const t=P.getElapsedTime();console.log("所有線條同步收合"),oe("shrinking"),G=t,K=t+1/u.shrinkSpeed;const i=o.numLines+p.numLines;for(let n=0;n<i;n++)M[n]!==void 0&&(F[n]="shrinking")}function Ye(){E.value&&(de()?console.log("行動裝置，不啟用滑鼠控制"):(console.log("啟用桌面滑鼠控制"),window.addEventListener("mousemove",Le)))}function qe(){E.value&&window.removeEventListener("mousemove",Le)}function Le(t){if(de())return;const i=window.innerWidth/2,n=window.innerHeight/2,e=(t.clientX-i)*.001,a=(t.clientY-n)*.001;O=e,y=-a,Z=(t.clientX/window.innerWidth-.5)*Math.PI*2,J=(t.clientY/window.innerHeight-.5)*Math.PI*2,J=Math.max(-Math.PI,Math.min(Math.PI,J)),Z=Math.max(-Math.PI,Math.min(Math.PI,Z)),t.clientX,t.clientY}_e(()=>{Be()&&(we(),Ce().then(()=>{console.log("環境貼圖載入完成"),Oe(),Q("resourcesLoaded",!0)}).catch(t=>{console.error("環境貼圖載入失敗:",t)}),window.addEventListener("resize",ke))}),be(()=>{Ge(),qe()}),z({startGrowingAnimation:Ue,startShrinkingAnimation:Ie,addMouseControlEvents:Ye,updatePosition:He});function He(t,i,n){d&&(b=t,j=-i,ee=n,console.log(`更新滾動位移: x=${t}, y=${i}, z=${n}`))}return(t,i)=>(k(),w("div",dt,[c("div",{ref_key:"canvasContainer",ref:E,class:"canvas-container"},null,512)]))}},ht={class:"main-container"},gt={class:"main-section"},ft={key:0,class:"section section2"},pt={key:1,class:"section section3"},vt={key:2,class:"section section4"},St={key:3,class:"section section5"},wt={key:4,class:"section aboutUsSection"},kt={key:5,class:"section section6"},Lt={key:6,class:"section section7"},Mt={key:7,class:"section section8"},Pt={key:8,class:"section section9"},yt={key:9,class:"section ourWorksSection"},Et={key:10,class:"section section10"},Tt={key:11,class:"section section11"},At={key:12,class:"section section12"},_t={key:13,class:"section section13"},bt={key:14,class:"section section14"},xt={key:15,class:"section section15"},Ct={key:16,class:"section section16"},Dt={key:17,class:"section contactUsSection"},Ft={class:"desktop-group"},Rt={class:"mobile-group"},Ut={__name:"shaderGLSL",setup(xe){ut(),Te.registerPlugin(Ae);const z=N(null),ue=N(!1),Q=N("idle"),E=N(!1),o=N(!1),p=N(!1),g=N(!0);let u=null;const d=()=>{ct(()=>{[{trigger:".section2",start:"top 80%",markers:!1,onEnter:()=>{J(),g.value=!1},onLeaveBack:()=>{se(),g.value=!0}},{trigger:".section3",start:"center center",endTrigger:".section6",end:"center center",markers:!1,scrub:2,onUpdate:s=>{T(0,0,0,0,-5,0,s.progress)}},{trigger:".section6",start:"center center",end:"center center",markers:!1,onEnter:()=>m(),onLeaveBack:()=>v()},{trigger:".section10",start:"center center",markers:!1,onEnter:()=>v(),onLeaveBack:()=>m()},{trigger:".section11",start:"center center",markers:!1,onEnter:()=>m(),onLeaveBack:()=>v()},{trigger:".section12",start:"center center",markers:!1,onEnter:()=>v(),onLeaveBack:()=>m()},{trigger:".section13",start:"center center",end:"bottom top",scrub:1,markers:!1,onEnter:()=>m(),onLeaveBack:()=>v()},{trigger:".section14",start:"center center",end:"bottom top",scrub:1,markers:!1,onEnter:()=>v(),onLeaveBack:()=>m()},{trigger:".section15",start:"center center",markers:!1,onEnter:()=>m(),onLeaveBack:()=>v()}].forEach(s=>{Te.timeline({scrollTrigger:{trigger:s.trigger,start:s.start,end:s.end,endTrigger:s.endTrigger,scrub:s.scrub,markers:s.markers,onEnter:s.onEnter,onLeaveBack:s.onLeaveBack,onUpdate:s.onUpdate}})})})},T=(y,s,D,b,j,ee,M)=>{if(z.value){const A=(b-y)*M,x=(j-s)*M,$=(ee-D)*M,F=y+A,R=s+x,W=D+$;z.value.updatePosition(F,R,W)}},m=()=>{z.value&&z.value.startGrowingAnimation()},v=()=>{z.value&&z.value.startShrinkingAnimation()},S=()=>{ue.value=!0},P=y=>{Q.value=y},B=y=>{E.value&&(y==="growing"?u=setTimeout(()=>{v()},0):y==="shrinking"&&(u=setTimeout(()=>{m()},1e3)))},H=()=>{o.value=!0,se(),z.value.addMouseControlEvents(),d(),document.body.style.overflow="auto"},se=()=>{E.value||(E.value=!0,m())},J=()=>{E.value=!1,u&&(clearTimeout(u),u=null),v()},Z=()=>{p.value=!p.value,p.value?document.body.style.overflow="hidden":o.value&&(document.body.style.overflow="auto")},O=(y,s=!1)=>{s&&Z(),setTimeout(()=>{const D=document.querySelector(`.${y}`);D&&window.scrollTo({top:D.offsetTop,behavior:"smooth"})},100)};return _e(()=>{document.body.style.overflow="hidden"}),be(()=>{u&&clearTimeout(u),E.value=!1,Ae.getAll().forEach(y=>y.kill())}),(y,s)=>{const D=mt;return k(),w(lt,null,[c("div",ht,[c("div",gt,[l(ue)&&!l(o)?(k(),w("div",{key:0,class:"startButton",onClick:H}," Start ")):L("",!0),c("h1",{class:I([{hidden:!l(g)||l(g)&&!l(o)},"company-name"])},s[6]||(s[6]=[c("span",{class:"front-name"}," Splash ",-1),c("span",{class:"back-name"}," DigiLab ",-1)]),2)]),l(o)?(k(),w("div",ft)):L("",!0),l(o)?(k(),w("div",pt)):L("",!0),l(o)?(k(),w("div",vt)):L("",!0),l(o)?(k(),w("div",St)):L("",!0),l(o)?(k(),w("div",wt)):L("",!0),l(o)?(k(),w("div",kt)):L("",!0),l(o)?(k(),w("div",Lt)):L("",!0),l(o)?(k(),w("div",Mt)):L("",!0),l(o)?(k(),w("div",Pt)):L("",!0),l(o)?(k(),w("div",yt)):L("",!0),l(o)?(k(),w("div",Et)):L("",!0),l(o)?(k(),w("div",Tt)):L("",!0),l(o)?(k(),w("div",At)):L("",!0),l(o)?(k(),w("div",_t)):L("",!0),l(o)?(k(),w("div",bt)):L("",!0),l(o)?(k(),w("div",xt)):L("",!0),l(o)?(k(),w("div",Ct)):L("",!0),l(o)?(k(),w("div",Dt)):L("",!0)]),at(D,{ref_key:"splashRef",ref:z,onResourcesLoaded:S,onStateChange:P,onAnimationComplete:B},null,512),c("div",{class:I([{active:l(o)&&l(g)},"l-footer"])},s[7]||(s[7]=[rt('<div class="desktop-group"><div class="footer-saparator"><div class="footer-saparator-line"></div></div><div class="footer-link"> Let&#39;s Make a Splash </div><div class="footer-saparator"><div class="footer-saparator-line"></div></div></div>',1)]),2),c("div",{class:I([{active:l(o)},"l-header"])},[c("div",Ft,[c("div",{class:I(["header-link",{hidden:l(g)}])}," Splash DigiLab ",2),c("div",{class:I(["header-saparator",{hidden:l(g)}])},s[8]||(s[8]=[c("div",{class:"header-saparator-line"},null,-1)]),2),c("div",{class:"header-link",onClick:s[0]||(s[0]=b=>O("aboutUsSection"))}," About Us "),c("div",{class:I(["header-saparator",{hidden:!l(g)}])},s[9]||(s[9]=[c("div",{class:"header-saparator-line"},null,-1)]),2),c("div",{class:"header-link",onClick:s[1]||(s[1]=b=>O("ourWorksSection"))}," Our Works "),c("div",{class:I(["header-saparator",{hidden:!l(g)}])},s[10]||(s[10]=[c("div",{class:"header-saparator-line"},null,-1)]),2),c("div",{class:"header-link",onClick:s[2]||(s[2]=b=>O("contactUsSection"))}," Contact Us ")]),c("div",Rt,[c("div",{class:I(["header-link",{hidden:l(g)}])},"Splash DigiLab",2),s[12]||(s[12]=c("div",{class:"header-saparator"},[c("div",{class:"header-saparator-line"})],-1)),c("div",{class:"hamburger-menu",onClick:Z},[c("div",{class:I([{open:l(p)},"hamburger-icon"])},s[11]||(s[11]=[c("span",null,null,-1),c("span",null,null,-1),c("span",null,null,-1)]),2)])]),c("div",{class:I([{active:l(p)},"mobile-menu"])},[c("div",{class:"menu-item",onClick:s[3]||(s[3]=b=>O("aboutUsSection",!0))}," About Us "),c("div",{class:"menu-item",onClick:s[4]||(s[4]=b=>O("ourWorksSection",!0))}," Our Works "),c("div",{class:"menu-item",onClick:s[5]||(s[5]=b=>O("contactUsSection",!0))}," Contact Us ")],2)],2)],64)}}};export{Ut as default};
