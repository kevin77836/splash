{"version":3,"file":"showMotion-CulipBVb.js","sources":["../../../../pages/showMotion.vue"],"sourcesContent":["<template>\n    <div class=\"main-container\">\n        <div class=\"main-section\">\n            <div v-if=\"loadComplete && !isStarted\" class=\"startButton\" @click=\"clickStart\">\n                Start\n            </div>\n      \n            <h1 :class=\"{'hidden': isHidden}\" class=\"company-name\">\n            <span class=\"front-name\">\n            Splash\n            </span>\n            <span class=\"back-name\">\n            DigiLab\n                </span>\n            </h1>\n        </div>\n    </div>\n    <Splash\n    ref=\"splashRef\" \n    @resourcesLoaded=\"handleResourcesLoaded\"\n    @stateChange=\"handleStateChange\"\n    @animationComplete=\"handleAnimationComplete\"\n    />\n    <div :class=\"{'active': isStarted}\" class=\"l-header\">\n        <div class=\"desktop-group\">\n            <div class=\"header-link\">\n                AR/VR\n            </div>\n            <div class=\"header-saparator\">\n                <div class=\"header-saparator-line\"></div>\n            </div>\n            <div class=\"header-link\">\n                Animation\n            </div>\n            <div class=\"header-saparator\">\n                <div class=\"header-saparator-line\"></div>\n            </div>\n            <div class=\"header-link\">\n                UI/UX\n            </div>\n        </div>\n    </div>\n    <div :class=\"{'active': isStarted}\" class=\"l-footer\">\n        <div class=\"desktop-group\">\n            <div class=\"footer-link\">\n                Web Development\n            </div>\n            <div class=\"footer-saparator\">\n                <div class=\"footer-saparator-line\"></div>\n            </div>\n            <div class=\"footer-link\">\n                CIS\n            </div>\n            <div class=\"footer-saparator\">\n                <div class=\"footer-saparator-line\"></div>\n            </div>\n            <div class=\"footer-link\">\n                Graphic Design\n            </div>\n        </div>\n    </div>\n</template>\n<script setup>\n    import gsap from 'gsap';\n    import { ScrollTrigger } from 'gsap/ScrollTrigger';\n    import { useWindowSize } from '@vueuse/core'\n    const { width, height } = useWindowSize();\n    \n    // 註冊 ScrollTrigger 插件\n    if (process.client) {\n        gsap.registerPlugin(ScrollTrigger);\n    }\n\n    function handleKeyup(e) {\n        clickStart();\n    }\n    \n    const splashRef = ref(null);\n    const loadComplete = ref(false);\n    const currentState = ref('idle');\n    const isAutoPlaying = ref(false);\n    const isStarted = ref(false);\n    const isHidden = ref(true);\n    const isMenuOpen = ref(false);\n    const isLandingPage = ref(true);\n    let autoPlayTimer = null;\n    \n\n    // 基本動畫控制函數\n    const growingFunction = () => {\n        if (splashRef.value) {\n        splashRef.value.startGrowingAnimation();\n        }\n    }\n    \n    const shrinkingFunction = () => {\n        if (splashRef.value) {\n        splashRef.value.startShrinkingAnimation();\n        }\n    }\n    \n    // 處理資源載入完成事件\n    const handleResourcesLoaded = () => {\n        loadComplete.value = true;\n    }\n    \n    // 處理狀態變化\n    const handleStateChange = (state) => {\n        currentState.value = state;\n    }\n    \n    // 處理動畫完成事件\n    const handleAnimationComplete = (animationType) => {\n        if (!isAutoPlaying.value) return;\n        \n        if (animationType === 'growing') {\n            // 生長動畫完成，等待1秒後開始收縮\n            autoPlayTimer = setTimeout(() => {\n                shrinkingFunction();\n            }, 0);\n        } else if (animationType === 'shrinking') {\n            // 收縮動畫完成，等待2秒後開始生長\n            autoPlayTimer = setTimeout(() => {\n                growingFunction();\n            }, 1000);\n        }\n    }\n    \n    const clickStart = () => {\n        isStarted.value = true;\n        isHidden.value = false;\n        startAutoPlay();\n        splashRef.value.addMouseControlEvents();\n        \n        // 啟用頁面滾動\n        document.body.style.overflow = 'auto';\n    }\n    \n    // 開始自動播放\n    const startAutoPlay = () => {\n        if (isAutoPlaying.value) return; // 如果已經在播放則不執行\n        isAutoPlaying.value = true;\n        \n        // 從生長動畫開始\n        growingFunction();\n    }\n    \n    // 停止自動播放\n    const stopAutoPlay = () => {\n        isAutoPlaying.value = false;\n        \n        // 清除任何待執行的定時器\n        if (autoPlayTimer) {\n            clearTimeout(autoPlayTimer);\n            autoPlayTimer = null;\n        }\n        \n        // 執行收合動畫，使其回到起點\n        shrinkingFunction();\n    }\n    \n    // 切換漢堡選單\n    const toggleMenu = () => {\n        isMenuOpen.value = !isMenuOpen.value;\n        // 當選單打開時禁止滾動\n        if (isMenuOpen.value) {\n            document.body.style.overflow = 'hidden';\n        } else {\n            // 如果已經開始，則恢復滾動\n            if (isStarted.value) {\n                document.body.style.overflow = 'auto';\n            }\n        }\n    }\n    \n    // 滾動到指定區塊\n    const scrollToSection = (sectionClass, isFromMobile = false) => {\n        // 如果從行動版選單點擊，先關閉選單\n        if (isFromMobile) {\n            toggleMenu();\n        }\n        \n        // 使用 setTimeout 確保 DOM 已更新\n        setTimeout(() => {\n            const section = document.querySelector(`.${sectionClass}`);\n            if (section) {\n                // 使用平滑滾動\n                window.scrollTo({\n                    top: section.offsetTop,\n                    behavior: 'smooth'\n                });\n            }\n        }, 100);\n    }\n    \n    onMounted(() => {\n        document.body.style.overflow = 'hidden';\n        window.addEventListener('keyup', handleKeyup);\n    });\n    // 組件卸載時清理\n    onUnmounted(() => {\n        if (autoPlayTimer) {\n            clearTimeout(autoPlayTimer);\n        }\n        isAutoPlaying.value = false;\n        \n        // 清理所有 ScrollTrigger 實例\n        ScrollTrigger.getAll().forEach(trigger => trigger.kill());\n    });\n</script>"],"names":[],"mappings":";;;;;;;;AAkEI,UAAM,EAAE,OAAO,OAAO,IAAI,cAAc;AAWlC,UAAA,YAAY,IAAI,IAAI;AACpB,UAAA,eAAe,IAAI,KAAK;AACxB,UAAA,eAAe,IAAI,MAAM;AACzB,UAAA,gBAAgB,IAAI,KAAK;AACzB,UAAA,YAAY,IAAI,KAAK;AACrB,UAAA,WAAW,IAAI,IAAI;AACN,QAAI,KAAK;AACN,QAAI,IAAI;AAK9B,UAAM,kBAAkB,MAAM;AAC1B,UAAI,UAAU,OAAO;AACrB,kBAAU,MAAM,sBAAsB;AAAA,MAAA;AAAA,IAE1C;AAEA,UAAM,oBAAoB,MAAM;AAC5B,UAAI,UAAU,OAAO;AACrB,kBAAU,MAAM,wBAAwB;AAAA,MAAA;AAAA,IAE5C;AAGA,UAAM,wBAAwB,MAAM;AAChC,mBAAa,QAAQ;AAAA,IACzB;AAGM,UAAA,oBAAoB,CAAC,UAAU;AACjC,mBAAa,QAAQ;AAAA,IACzB;AAGM,UAAA,0BAA0B,CAAC,kBAAkB;AAC3C,UAAA,CAAC,cAAc,MAAO;AAE1B,UAAI,kBAAkB,WAAW;AAEb,mBAAW,MAAM;AACX,4BAAA;AAAA,WACnB,CAAC;AAAA,MAAA,WACG,kBAAkB,aAAa;AAEtB,mBAAW,MAAM;AACb,0BAAA;AAAA,WACjB,GAAI;AAAA,MAAA;AAAA,IAEf;;;;;;;;;;;;;;;;;;;;;;;;;;;"}